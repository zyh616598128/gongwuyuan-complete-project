# Gongwuyuan 项目开发协作指南

## 1. 项目结构说明

### 1.1 仓库结构
```
gongwuyuan-complete-project/
├── backend/                 # 后端项目
│   ├── src/main/java/com/gwy/  # Java源码
│   ├── src/main/resources/     # 资源文件
│   ├── pom.xml               # Maven配置
│   └── Dockerfile           # 容器化配置
├── frontend/                # 前端项目
│   ├── web/                 # Web前端 (待开发)
│   └── app/                 # Android原生应用
├── docs/                    # 项目文档
├── docker-compose.yml       # Docker编排配置
├── requirements-document.md # 需求文档
├── api-contract.md         # API契约文档
├── web-technical-spec.md   # Web端技术规范
└── development-guidelines.md # 开发协作指南
```

### 1.2 分支策略
- `main` - 主分支，生产环境代码
- `develop` - 开发主分支
- `feature/*` - 功能开发分支
- `bugfix/*` - 问题修复分支
- `release/*` - 发布准备分支

## 2. 代码规范

### 2.1 命名规范

#### Java (后端)
- 类名：大驼峰命名法，如 `UserService`
- 方法名：小驼峰命名法，如 `getUserInfo`
- 常量：全大写加下划线，如 `MAX_RETRY_COUNT`
- 变量：小驼峰命名法，如 `userName`

#### JavaScript/React (前端)
- 组件名：大驼峰命名法，如 `UserProfile`
- 函数名：小驼峰命名法，如 `fetchUserData`
- 常量：大驼峰命名法，如 `API_BASE_URL`
- 文件名：kebab-case，如 `user-profile.jsx`

#### CSS/SCSS
- 类名：kebab-case，如 `.user-profile-card`
- 变量：kebab-case，如 `$primary-color`

### 2.2 代码风格

#### Java
- 缩进：4个空格
- 行长度：不超过120字符
- 注释：使用中文注释，关键业务逻辑需详细说明

#### JavaScript
- 缩进：2个空格
- 使用ESLint和Prettier进行代码格式化
- 优先使用箭头函数
- 使用const/let代替var

### 2.3 提交信息规范

使用约定式提交 (Conventional Commits)：

```
<type>(<scope>): <description>

[optional body]

[optional footer(s)]
```

#### Type 类型
- `feat`: 新功能
- `fix`: 修复bug
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 重构代码
- `test`: 测试相关
- `chore`: 构建过程或辅助工具变动

#### 示例
```
feat(auth): 添加用户注册功能

- 实现用户注册接口
- 添加表单验证
- 实现密码加密存储

Closes #123
```

## 3. 开发流程

### 3.1 需求开发流程
1. **需求评审** - 产品经理与开发团队评审需求
2. **技术评审** - 确定技术方案和任务拆分
3. **任务分配** - 分配给具体开发人员
4. **开发实施** - 在feature分支上开发
5. **代码审查** - 提交PR进行代码审查
6. **测试验证** - 测试人员验证功能
7. **合并发布** - 合并到主分支并发布

### 3.2 代码审查流程
1. **自检** - 开发人员完成自测
2. **提交PR** - 提交Pull Request
3. **技术审查** - 至少一位同事审查代码
4. **产品验收** - 产品经理验收功能
5. **合并代码** - 审查通过后合并

### 3.3 测试策略
- **单元测试** - 覆盖率不低于80%
- **集成测试** - 验证模块间交互
- **端到端测试** - 关键业务流程验证
- **自动化测试** - CI/CD流程中执行

## 4. 环境管理

### 4.1 开发环境
- 本地开发：使用本地数据库和Redis
- API测试：使用Postman或类似工具
- 前端调试：使用浏览器开发者工具

### 4.2 测试环境
- 地址：http://81.70.234.241:8080
- 用于集成测试和功能验证
- 数据定期清理

### 4.3 生产环境
- 地址：http://81.70.234.241:8080
- 仅部署稳定版本
- 监控和日志记录

## 5. API 开发规范

### 5.1 接口设计原则
- RESTful API 设计
- 版本控制（如需要）
- 统一响应格式
- 错误码标准化

### 5.2 安全考虑
- 输入验证和过滤
- SQL注入防护
- XSS攻击防护
- 权限验证

### 5.3 性能优化
- 数据库查询优化
- 缓存策略
- 分页处理
- 异步处理

## 6. 前端开发规范

### 6.1 组件开发
- 单一职责原则
- 可复用性设计
- 状态管理规范化
- 样式隔离

### 6.2 状态管理
- 全局状态：使用Redux/Zustand
- 组件状态：使用useState/useReducer
- 异步状态：使用React Query/SWR

### 6.3 路由管理
- 配置路由守卫
- 实现权限控制
- 处理加载状态

## 7. 质量保证

### 7.1 代码质量
- 代码审查覆盖率100%
- 自动化测试通过率100%
- 代码覆盖率达标

### 7.2 性能指标
- 页面加载时间 < 3秒
- API响应时间 < 500ms
- 资源压缩和缓存

### 7.3 安全指标
- 安全扫描通过
- 渗透测试通过
- 数据加密存储

## 8. 部署流程

### 8.1 CI/CD 流程
1. 代码提交触发CI
2. 运行单元测试
3. 代码质量检查
4. 构建Docker镜像
5. 部署到测试环境
6. 验收测试
7. 部署到生产环境

### 8.2 发布策略
- 蓝绿部署
- 金丝雀发布
- 回滚预案

## 9. 团队协作

### 9.1 沟通渠道
- 日常沟通：微信群
- 问题跟踪：GitHub Issues
- 会议安排：定期站会

### 9.2 问题处理
- 优先级分级
- 责任人指派
- 进度跟踪

### 9.3 知识管理
- 文档及时更新
- 技术分享
- 最佳实践总结

## 10. 项目里程碑

### 10.1 当前阶段：Web端开发
- 完成Web端基础功能
- 用户认证系统
- 题库浏览功能
- 练习功能

### 10.2 下一阶段：App端迁移
- Web功能迁移到App
- 优化移动端体验
- 添加原生功能

### 10.3 长期规划
- 增强AI辅助功能
- 个性化学习推荐
- 社交学习功能

遵循此开发协作指南有助于确保项目高质量、高效地推进，促进团队成员间的良好协作。